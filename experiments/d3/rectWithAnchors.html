<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.29.1"></script>
</head>
<body>
<script type="text/javascript">
 
var svg = d3.select("body").append("svg:svg")
.attr("width", 960)
.attr("height", 500);
 
var g = svg.append("svg:g");
 
rect = g.append("svg:rect")
.attr("rx", 6)
.attr("ry", 6)
.attr("x", 10)
.attr("y", 10)
.attr("width", 100)
.attr("height", 100)
.call(d3.behavior.drag().on("drag", moveRect));

circle1 = g.append("svg:circle")
.attr("cx", 10)
.attr("cy", 10)
.attr("r", 5)
.style("fill", "rgb(125,125,125)");
 
circle2 = g.append("svg:circle")
.attr("cx", 110)
.attr("cy", 110)
.attr("r", 5)
.style("fill", "rgb(125,125,125)")
.call(d3.behavior.drag().on("drag", moveAndRect));

function moveRect(){
    var dragTarget = d3.select(this);
    dragTarget
        .attr("x", function(){return d3.event.dx + parseInt(dragTarget.attr("x"))})
        .attr("y", function(){return d3.event.dy + parseInt(dragTarget.attr("y"))});
		
	var dragTarget2 = d3.selectAll("circle");
	dragTarget2
		.attr("cx", function(){return d3.event.dx + parseInt(dragTarget2.attr("cx"))})
		.attr("cy", function(){return d3.event.dy + parseInt(dragTarget2.attr("cy"))});
}

 function moveAndRect(){
    var dragTarget = d3.select(this);
    dragTarget
        .attr("cx", function(){return d3.event.dx + parseInt(dragTarget.attr("cx"))})
        .attr("cy", function(){return d3.event.dy + parseInt(dragTarget.attr("cy"))});
		
	var dragTarget2 = d3.select("rect");
	dragTarget2.attr("width", parseInt(dragTarget2.attr("width")) + d3.event.dx);
	dragTarget2.attr("height", parseInt(dragTarget2.attr("height")) + d3.event.dy);
};



</script>
</body>
</html>